<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIKTIK</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/public/userProfile/user.css">
    <link href="/public/adminAssets/css/main.css" rel="stylesheet" type="text/css" />
    <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

<!-- Font Awesome CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

</head>

  <style>
    .emailwhatsap a {
      text-decoration: none; 
      color: inherit;
    }
    .copy-icon {
      cursor: pointer;
    }
    nav .menu-link {
  text-decoration: none;
  color: inherit;
}

  </style>
<body>
    </div>
    </div>
    <div class="screen-overlay"></div>
    <aside class="navbar-aside " id="offcanvas_aside">
        <div class="aside-top">
            <a href="" class="brand-wrap logo menu-absolute m-0 h6">
            </a>
            <div>
                <button class="btn btn-icon btn-aside-minimize"> <i class="text-muted material-icons md-menu_open"></i>
                </button>
            </div>
        </div>
        <nav>
            <ul class="menu-aside">
                <li class="menu-item active">
                    <a class="menu-link" href="/userProfile"> <i class="icon material-icons md-perm_identity"></i>
                        <span class="text">Profile</span>
                    </a>
                </li>
                <li class="menu-item ">
                    <a class="menu-link active" href="/showWalletHistory"> <i
                            class="icon material-icons  md-account_balance_wallet"></i>
                        <span class="text">Wallet </span>
                    </a>

                </li>

                <li class="menu-item ">
                    <a class="menu-link" href="/listOrder"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">List orders</span>
                    </a>

                </li>
             

            </ul>
            <ul class="menu-aside">
                <li class="menu-item has-submenu">
                    <a class="menu-link" > <i class="icon material-icons md-location_on"></i>
                        <span class="text">Address</span>
                    </a>

                    <div class="submenu">
                        <a href="/getaddressList">address List</a>
                        <a href="/loadAddress">Add address</a>
                        <!-- <a href="" class="active">edit address</a> -->
                    </div>
                </li>
             
            </ul>
        </nav>
    </aside>
    <main class="main-wrap">
        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Welcome, <%= user.name %>
                    </h2>

                </div>
                <div>
                    <h6 class="d-flex justify-content-center text-success" id="copy_message"></h6>
                </div>

                <div>
                    <a href="/home" class="btn btn-primary"><i class="text-muted material-icons md-home"></i>Home</a>
                    <a href="/editProfile" class="btn btn-primary"><i class="text-muted material-icons md-edit"></i>Edit</a>
                </div>
            </div>
            <div class="row">
                <div class="row gutters-sm">
                    <div class="col-md-4 mb-3">
                        
                            <div class="card-bodyuser ">
                                    <img  src="public/userImages/<%=user.image %>" alt="Profile Image"
                                        class="rounded-circle mt-2 " width="200" height="150">
                                        <h2><%= user.name %></h2>
                                        <h6>ReferralCode:<%=user.referralCode%> <a class="copy-icon" onclick="copyReferralCode()"><i class="icon material-icons md-content_copy text-success "></i></a></h6>
                                        <p class="title"></p>
                                        <p></p>
                                        <a href=""><i class="icon material-icons md-call "></i></a>
                                        <a href="https://www.facebook.com/"><i class="material-icons md-facebook"></i></a>
                                        <p><button class="mt-1"> <%= user.email %></button></p>
                            </div>
                      

                    </div>
                    <div class="col-md-8">
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <h6 class="mb-0">Full Name</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                        <%= user.name %>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <h6 class="mb-0">Email</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                        <%= user.email %>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <h6 class="mb-0">Mobile</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                        <%= user.mobile %>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <h6 class="mb-0">Address</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                        <% if (userAddress && userAddress.length > 0) { %>
                                            <% const defaultAddress = userAddress[0].addresses.find(address => address.isDefault === true); %>
                                            <% if (defaultAddress) { %>
                                                <p><%= defaultAddress.address %>,<%= defaultAddress.town %>,<%= defaultAddress.state %></p>
                                                <p><%= defaultAddress.country %></p>                                        
                                                <p><%= defaultAddress.postalCode %></p>
                                                <p><%= defaultAddress.email %></p>
                                                <p><%= defaultAddress.phoneNumber %></p>
                                            <% } else { %>
                                                <p>No default address found.</p>
                                            <% } %>
                                        <% } else { %>
                                            <p>No address data available.</p>
                                        <% } %>
                                       
                                    </div>
                                  
                                      
                                    <hr>
                                        <!-- <a href="https://www.Gmail.com/"  <a href="/send-referral-email?code=<%= user.referralCode %>"><i class="icon material-icons md-mail "></i></a> -->
                                        <div class="emailwhatsap"><i class="icon material-icons md-mail text-danger"></i> <a href="https://www.Gmail.com/" >Send referral code via email</a></div>
                                        <div class="emailwhatsap"><i class="fab fa-whatsapp text-success"></i> <a href="https://web.whatsapp.com/">Send referral code via whatsapp</a></div>
                                    </div>
                              
                                <div class="row">
                                    <!-- <div class="col-sm-12">
                                        <a class="btn btn-info " target="__blank"
                                            href="https://www.bootdey.com/snippets/view/profile-edit-data-and-skills">Edit</a>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



            </div>
            


        </section> <!-- content-main end// -->

    </main>
    <script>
        function copyReferralCode() {
          const copy_message = document.getElementById('copy_message')
          var referralCode = '<%= user.referralCode %>';
          var inputElement = document.createElement('textarea');
          inputElement.value = referralCode;
          document.body.appendChild(inputElement);
          inputElement.select();
          document.execCommand('copy');
          document.body.removeChild(inputElement);
          copy_message.innerText = 'Referral Code copied to clipboard....!'
          setTimeout(()=>{
            copy_message.innerText = ''

          },2000)
          // Optionally, provide user feedback
        //   alert('Referral Code copied to clipboard: ' + referralCode);
        }
      </script>
    
    <script src="/public/adminAssets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="/public/adminAssets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="/public/adminAssets/js/vendors/select2.min.js"></script>
    <script src="/public/adminAssets/js/vendors/perfect-scrollbar.js"></script>
    <script src="/public/adminAssets/js/vendors/jquery.fullscreen.min.js"></script>
    <script src="/public/adminAssets/js/vendors/chart.js"></script>
    <!-- Main Script -->
    <script src="/public/adminAssets/js/main.js" type="text/javascript"></script>
    <script src="/public/adminAssets/js/custom-chart.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.min.js"></script>
</body>

</html>